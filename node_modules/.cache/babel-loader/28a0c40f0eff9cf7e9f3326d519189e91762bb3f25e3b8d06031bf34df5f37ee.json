{"ast":null,"code":"var _jsxFileName = \"/Users/rishuraj/skc_rishu/src/component/voice_chat/VoiceChat.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { FaMicrophone, FaStop } from 'react-icons/fa';\nimport { useNavigate } from 'react-router-dom';\nimport './vchat.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction VoiceChat() {\n  _s();\n  const [listening, setListening] = useState(false);\n  const [messages, setMessages] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const recognitionRef = useRef(null);\n  const messagesEndRef = useRef(null);\n  const navigate = useNavigate();\n  useEffect(() => {\n    if ('webkitSpeechRecognition' in window) {\n      recognitionRef.current = new window.webkitSpeechRecognition();\n      recognitionRef.current.continuous = false;\n      recognitionRef.current.interimResults = false;\n      recognitionRef.current.lang = 'en-US';\n      recognitionRef.current.onresult = event => {\n        const transcript = event.results[0][0].transcript;\n        sendMessage(transcript);\n      };\n      recognitionRef.current.onerror = event => {\n        console.error('Speech recognition error:', event.error);\n        setError('Speech recognition error. Please try again.');\n      };\n    } else {\n      setError('Speech recognition not supported in this browser.');\n    }\n  }, []);\n  const startListening = () => {\n    if (recognitionRef.current) {\n      setListening(true);\n      setError('');\n      recognitionRef.current.start();\n    }\n  };\n  const stopListening = () => {\n    if (recognitionRef.current) {\n      setListening(false);\n      recognitionRef.current.stop();\n    }\n  };\n  const sendMessage = async text => {\n    // Stop listening animation and disable mic button\n    setListening(false);\n    setMessages(prevMessages => [...prevMessages, {\n      text,\n      isBot: false\n    }]);\n    setLoading(true);\n    setError('');\n    try {\n      const response = await fetch(`https://flask-ai-project.vercel.app/?question=${encodeURIComponent(text)}`, {\n        method: 'GET',\n        rejectUnauthorized: false\n      });\n      if (!response.ok) {\n        throw new Error(`Server error: ${response.status} ${response.statusText}`);\n      }\n      const data = await response.json();\n      const botMessage = data.result;\n      setMessages(prevMessages => [...prevMessages, {\n        text: botMessage,\n        isBot: true\n      }]);\n    } catch (error) {\n      console.error('Error:', error);\n      setError(`Something went wrong: ${error.message}`);\n    } finally {\n      setLoading(false);\n      setListening(false); // Ensure listening animation stops\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-screen\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-boxees\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Voice Chat\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"messages\",\n        children: [messages.map((msg, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `message ${msg.isBot ? 'bot' : 'user'}`,\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"message-text\",\n            children: msg.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 15\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: messagesEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 19\n      }, this), listening && !error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"listening-animation\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Listening...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dot\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dot\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dot\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"voice-controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: startListening,\n          disabled: listening,\n          children: /*#__PURE__*/_jsxDEV(FaMicrophone, {\n            size: 24\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: stopListening,\n          disabled: !listening,\n          children: /*#__PURE__*/_jsxDEV(FaStop, {\n            size: 24\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"nav-button\",\n        onClick: () => navigate(\"/\"),\n        children: \"Go to Text Chat\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n}\n_s(VoiceChat, \"f11+rufpp8e7SMj+EQ629HqfEKU=\", false, function () {\n  return [useNavigate];\n});\n_c = VoiceChat;\nexport default VoiceChat;\nvar _c;\n$RefreshReg$(_c, \"VoiceChat\");","map":{"version":3,"names":["React","useState","useEffect","useRef","FaMicrophone","FaStop","useNavigate","jsxDEV","_jsxDEV","VoiceChat","_s","listening","setListening","messages","setMessages","loading","setLoading","error","setError","recognitionRef","messagesEndRef","navigate","window","current","webkitSpeechRecognition","continuous","interimResults","lang","onresult","event","transcript","results","sendMessage","onerror","console","startListening","start","stopListening","stop","text","prevMessages","isBot","response","fetch","encodeURIComponent","method","rejectUnauthorized","ok","Error","status","statusText","data","json","botMessage","result","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","msg","index","ref","onClick","disabled","size","_c","$RefreshReg$"],"sources":["/Users/rishuraj/skc_rishu/src/component/voice_chat/VoiceChat.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { FaMicrophone, FaStop } from 'react-icons/fa';\nimport { useNavigate } from 'react-router-dom';\nimport './vchat.css';\n\nfunction VoiceChat() {\n  const [listening, setListening] = useState(false);\n  const [messages, setMessages] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const recognitionRef = useRef(null);\n  const messagesEndRef = useRef(null);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if ('webkitSpeechRecognition' in window) {\n      recognitionRef.current = new window.webkitSpeechRecognition();\n      recognitionRef.current.continuous = false;\n      recognitionRef.current.interimResults = false;\n      recognitionRef.current.lang = 'en-US';\n\n      recognitionRef.current.onresult = (event) => {\n        const transcript = event.results[0][0].transcript;\n        sendMessage(transcript);\n      };\n\n      recognitionRef.current.onerror = (event) => {\n        console.error('Speech recognition error:', event.error);\n        setError('Speech recognition error. Please try again.');\n      };\n    } else {\n      setError('Speech recognition not supported in this browser.');\n    }\n  }, []);\n\n  const startListening = () => {\n    if (recognitionRef.current) {\n      setListening(true);\n      setError('');\n      recognitionRef.current.start();\n    }\n  };\n\n  const stopListening = () => {\n    if (recognitionRef.current) {\n      setListening(false);\n      recognitionRef.current.stop();\n    }\n  };\n\n  const sendMessage = async (text) => {\n    // Stop listening animation and disable mic button\n    setListening(false);\n    setMessages(prevMessages => [...prevMessages, { text, isBot: false }]);\n    setLoading(true);\n    setError('');\n\n    try {\n      const response = await fetch(`https://flask-ai-project.vercel.app/?question=${encodeURIComponent(text)}`, {\n        method: 'GET',\n        rejectUnauthorized: false\n      });\n\n      if (!response.ok) {\n        throw new Error(`Server error: ${response.status} ${response.statusText}`);\n      }\n\n      const data = await response.json();\n      const botMessage = data.result;\n\n      setMessages(prevMessages => [...prevMessages, { text: botMessage, isBot: true }]);\n    } catch (error) {\n      console.error('Error:', error);\n      setError(`Something went wrong: ${error.message}`);\n    } finally {\n      setLoading(false);\n      setListening(false); // Ensure listening animation stops\n    }\n  };\n\n\n  return (\n    <div className=\"container-screen\">\n      <div className=\"chat-boxees\">\n        <h2>Voice Chat</h2>\n\n        <div className=\"messages\">\n          {messages.map((msg, index) => (\n            <div key={index} className={`message ${msg.isBot ? 'bot' : 'user'}`}>\n              <p className=\"message-text\">{msg.text}</p>\n            </div>\n          ))}\n          <div ref={messagesEndRef} />\n        </div>\n\n        {error && <div className=\"error\">{error}</div>}\n\n        {listening && !error && (\n          <div className=\"listening-animation\">\n            <span>Listening...</span>\n            <div className=\"dot\"></div>\n            <div className=\"dot\"></div>\n            <div className=\"dot\"></div>\n          </div>\n        )}\n\n        {/* Fixed Controls at Bottom */}\n        <div className=\"voice-controls\">\n          <button onClick={startListening} disabled={listening}>\n            <FaMicrophone size={24} />\n          </button>\n          <button onClick={stopListening} disabled={!listening}>\n            <FaStop size={24} />\n          </button>\n        </div>\n\n        {/* Navigation Button */}\n        <button className=\"nav-button\" onClick={() => navigate(\"/\")}>\n          Go to Text Chat\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default VoiceChat;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}